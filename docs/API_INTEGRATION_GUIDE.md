# üîå –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ API –¥–ª—è Arbarea

**URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** https://arbarea-bice.vercel.app/

---

## üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Vercel

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Vercel ‚Üí Settings ‚Üí Environment Variables** –∏ –¥–æ–±–∞–≤—å—Ç–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è           | –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å                                    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ    |
| -------------------- | ----------------------------------------------- | -------------- |
| `RESEND_API_KEY`     | [resend.com](https://resend.com) ‚Üí API Keys     | ‚úÖ –î–∞          |
| `TELEGRAM_BOT_TOKEN` | [@BotFather](https://t.me/BotFather) –≤ Telegram | ‚úÖ –î–∞          |
| `TELEGRAM_CHAT_ID`   | –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∏–∂–µ                             | ‚úÖ –î–∞          |
| `CDEK_CLIENT_ID`     | [cdek.ru](https://www.cdek.ru/ru/integration)   | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| `CDEK_CLIENT_SECRET` | [cdek.ru](https://www.cdek.ru/ru/integration)   | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

---

## 1Ô∏è‚É£ Resend (Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [resend.com](https://resend.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **API Keys** ‚Üí **Create API Key**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `re_`)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Vercel:

```
–ù–∞–∑–≤–∞–Ω–∏–µ: RESEND_API_KEY
–ó–Ω–∞—á–µ–Ω–∏–µ: re_xxxxxxxxxxxxxxxxxxxx
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
curl -X POST https://arbarea-bice.vercel.app/api/send-email \
  -H "Content-Type: application/json" \
  -d '{"type":"order_created","orderId":"TEST-001","email":"–≤–∞—à@email.com","name":"–¢–µ—Å—Ç"}'
```

---

## 2Ô∏è‚É£ Telegram Bot (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö)

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞: `Arbarea Orders`
4. –í–≤–µ–¥–∏—Ç–µ username: `arbarea_orders_bot`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Vercel:

```
–ù–∞–∑–≤–∞–Ω–∏–µ: TELEGRAM_BOT_TOKEN
–ó–Ω–∞—á–µ–Ω–∏–µ: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID:

1. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram
2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getUpdates
   ```
5. –ù–∞–π–¥–∏—Ç–µ `"chat":{"id":-1001234567890}` ‚Äî —ç—Ç–æ –≤–∞—à Chat ID

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Vercel:

```
–ù–∞–∑–≤–∞–Ω–∏–µ: TELEGRAM_CHAT_ID
–ó–Ω–∞—á–µ–Ω–∏–µ: -1001234567890
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
curl -X POST https://arbarea-bice.vercel.app/api/send-telegram \
  -H "Content-Type: application/json" \
  -d '{"message":"–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!"}'
```

---

## 3Ô∏è‚É£ –¢–∏–Ω—å–∫–æ—Ñ—Ñ Webhook (–°—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

1. –í–æ–π–¥–∏—Ç–µ –≤ [business.tbank.ru](https://business.tbank.ru)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—ç–∫–≤–∞–π—Ä–∏–Ω–≥** ‚Üí **–¢–µ—Ä–º–∏–Ω–∞–ª—ã**
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ç–µ—Ä–º–∏–Ω–∞–ª
4. –í –ø–æ–ª–µ **Notification URL** —É–∫–∞–∂–∏—Ç–µ:
   ```
   https://arbarea-bice.vercel.app/api/payment-webhook
   ```
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã:

```
TINKOFF_TERMINAL_KEY=–≤–∞—à_–∫–ª—é—á
TINKOFF_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
```

---

## 4Ô∏è‚É£ –°–î–≠–ö API (–†–µ–∞–ª—å–Ω—ã–µ –ü–í–ó) ‚Äî –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [cdek.ru/ru/integration](https://www.cdek.ru/ru/integration)
2. –ó–∞–∫–ª—é—á–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä (1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è)
3. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** ‚Üí **API-–∫–ª—é—á–∏**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Vercel:

```
–ù–∞–∑–≤–∞–Ω–∏–µ: CDEK_CLIENT_ID
–ó–Ω–∞—á–µ–Ω–∏–µ: –≤–∞—à_client_id

–ù–∞–∑–≤–∞–Ω–∏–µ: CDEK_CLIENT_SECRET
–ó–Ω–∞—á–µ–Ω–∏–µ: –≤–∞—à_client_secret
```

> ‚ÑπÔ∏è –ë–µ–∑ —ç—Ç–∏—Ö –∫–ª—é—á–µ–π –°–î–≠–ö –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```
https://arbarea-bice.vercel.app/api/cdek?action=points&city=44
```

---

## üìù –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ [vercel.com](https://vercel.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **arbarea**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Environment Variables**
4. –î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
   - –í–≤–µ–¥–∏—Ç–µ **Key** (–Ω–∞–∑–≤–∞–Ω–∏–µ)
   - –í–≤–µ–¥–∏—Ç–µ **Value** (–∑–Ω–∞—á–µ–Ω–∏–µ)
   - –í—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: ‚úÖ Production, ‚úÖ Preview, ‚úÖ Development
   - –ù–∞–∂–º–∏—Ç–µ **Save**
5. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
   - –ù–∞–∂–º–∏—Ç–µ **‚ãÆ** –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–µ–ø–ª–æ–µ ‚Üí **Redeploy**

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [ ] `RESEND_API_KEY` –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] `TELEGRAM_BOT_TOKEN` –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] `TELEGRAM_CHAT_ID` –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] Tinkoff webhook URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Redeploy –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –ø–æ–ª—É—á–µ–Ω–æ

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2026-01-01
